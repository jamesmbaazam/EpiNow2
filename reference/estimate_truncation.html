<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Estimate Truncation of Observed Data — estimate_truncation • EpiNow2</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Estimate Truncation of Observed Data — estimate_truncation"><meta property="og:description" content="
Estimates a truncation distribution from multiple snapshots of the same
data source over time. This distribution can then be used in regional_epinow,
epinow, and estimate_infections to adjust for truncated data. See here
for an example of using this approach on Covid-19 data in England.
The model of truncation is as follows:
The truncation distribution is assumed to be log normal with a mean and
standard deviation that is informed by the data.
The data set with the latest observations is adjusted for truncation using
the truncation distribution.
Earlier data sets are recreated by applying the truncation distribution to
the adjusted latest observations in the time period of the earlier data set. These
data sets are then compared to the earlier observations assuming a negative binomial
observation model.


This model is then fit using stan with standard normal, or half normal,
prior for the mean, standard deviation and 1 over the square root of the over dispersion.
This approach assumes that:
Current truncation is related to past truncation.
Truncation is a multiplicative scaling of underlying reported cases.
Truncation is log normally distributed.

"><meta property="og:image" content="epiforecasts.io/EpiNow2/reference/figures/unnamed-chunk-13-1.png"><meta property="og:image:alt" content="Example estimates produced by EpiNow2 of the reproduction number, cases by date of infection and cases by date of report"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@cmmid_lshtm"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EpiNow2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.3.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/epiforecasts/EpiNow2" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimate Truncation of Observed Data</h1>
    <small class="dont-index">Source: <a href="https://github.com/epiforecasts/EpiNow2/blob/HEAD/R/estimate_truncation.R" class="external-link"><code>R/estimate_truncation.R</code></a></small>
    <div class="hidden name"><code>estimate_truncation.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
Estimates a truncation distribution from multiple snapshots of the same
data source over time. This distribution can then be used in <code>regional_epinow</code>,
<code>epinow</code>, and <code>estimate_infections</code> to adjust for truncated data. See <a href="https://gist.github.com/seabbs/176b0c7f83eab1a7192a25b28bbd116a" class="external-link">here</a>
for an example of using this approach on Covid-19 data in England.</p>
<p>The model of truncation is as follows:</p><ol><li><p>The truncation distribution is assumed to be log normal with a mean and
standard deviation that is informed by the data.</p></li>
<li><p>The data set with the latest observations is adjusted for truncation using
the truncation distribution.</p></li>
<li><p>Earlier data sets are recreated by applying the truncation distribution to
the adjusted latest observations in the time period of the earlier data set. These
data sets are then compared to the earlier observations assuming a negative binomial
observation model.</p></li>
</ol><p>This model is then fit using <code>stan</code> with standard normal, or half normal,
prior for the mean, standard deviation and 1 over the square root of the over dispersion.</p>
<p>This approach assumes that:</p><ul><li><p>Current truncation is related to past truncation.</p></li>
<li><p>Truncation is a multiplicative scaling of underlying reported cases.</p></li>
<li><p>Truncation is log normally distributed.</p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">estimate_truncation</span><span class="op">(</span>
  <span class="va">obs</span>,
  max_truncation <span class="op">=</span> <span class="fl">10</span>,
  model <span class="op">=</span> <span class="cn">NULL</span>,
  CrIs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.9</span><span class="op">)</span>,
  verbose <span class="op">=</span> <span class="cn">TRUE</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>obs</dt>
<dd><p>A list of data frames each containing a date variable
and a confirm (integer) variable. Each data set should be a snapshot
of the reported data over time. All data sets must contain a complete vector
of dates.</p></dd>
<dt>max_truncation</dt>
<dd><p>Integer, defaults to 10. Maximum number of
days to include in the truncation distribution.</p></dd>
<dt>model</dt>
<dd><p>A compiled stan model to override the default model. May be
useful for package developers or those developing extensions.</p></dd>
<dt>CrIs</dt>
<dd><p>Numeric vector of credible intervals to calculate.</p></dd>
<dt>verbose</dt>
<dd><p>Logical, should model fitting progress be returned.</p></dd>
<dt>...</dt>
<dd><p>Additional parameters to pass to <code><a href="https://mc-stan.org/rstan/reference/stanmodel-method-sampling.html" class="external-link">rstan::sampling</a></code>.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list containing: the summary parameters of the truncation distribution
(<code>dist</code>), the estimated CMF of the truncation distribution (<code>cmf</code>, can be used to adjusted
new data), a data frame containing the observed truncated data, latest observed data
and the adjusted for truncation observations (<code>obs</code>), a data frame containing the last
observed data (<code>last_obs</code>, useful for plotting and validation), the data used for fitting
(<code>data</code>) and the fit object (<code>fit</code>).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># set number of cores to use</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>mc.cores <span class="op">=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># get example case counts</span></span>
<span class="r-in"><span class="va">reported_cases</span> <span class="op">&lt;-</span> <span class="va">example_confirmed</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">60</span><span class="op">]</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># define example truncation distribution (note not integer adjusted)</span></span>
<span class="r-in"><span class="va">trunc_dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span class="r-in">  mean <span class="op">=</span> <span class="fu"><a href="convert_to_logmean.html">convert_to_logmean</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span class="r-in">  mean_sd <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span class="r-in">  sd <span class="op">=</span> <span class="fu"><a href="convert_to_logsd.html">convert_to_logsd</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span class="r-in">  sd_sd <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span class="r-in">  max <span class="op">=</span> <span class="fl">10</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># apply truncation to example data</span></span>
<span class="r-in"><span class="va">construct_truncation</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">index</span>, <span class="va">cases</span>, <span class="va">dist</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="va">index</span><span class="op">)</span></span>
<span class="r-in">  <span class="va">cmf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html" class="external-link">dlnorm</a></span><span class="op">(</span></span>
<span class="r-in">      <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">dist</span><span class="op">$</span><span class="va">max</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span class="r-in">      <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">dist</span><span class="op">$</span><span class="va">mean</span>, <span class="va">dist</span><span class="op">$</span><span class="va">mean_sd</span><span class="op">)</span>,</span>
<span class="r-in">      <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">dist</span><span class="op">$</span><span class="va">sd</span>, <span class="va">dist</span><span class="op">$</span><span class="va">sd_sd</span><span class="op">)</span></span>
<span class="r-in">    <span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in">  <span class="va">cmf</span> <span class="op">&lt;-</span> <span class="va">cmf</span> <span class="op">/</span> <span class="va">cmf</span><span class="op">[</span><span class="va">dist</span><span class="op">$</span><span class="va">max</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span></span>
<span class="r-in">  <span class="va">cmf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="va">cmf</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span class="r-in">  <span class="va">trunc_cases</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">cases</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">.N</span> <span class="op">-</span> <span class="va">index</span><span class="op">)</span><span class="op">]</span></span>
<span class="r-in">  <span class="va">trunc_cases</span><span class="op">[</span><span class="op">(</span><span class="va">.N</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">cmf</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">:</span><span class="va">.N</span>, <span class="va">confirm</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">confirm</span> <span class="op">*</span> <span class="va">cmf</span><span class="op">)</span><span class="op">]</span></span>
<span class="r-in">  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">trunc_cases</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"><span class="va">example_data</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">15</span>, <span class="fl">10</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span class="r-in">  <span class="va">construct_truncation</span>,</span>
<span class="r-in">  cases <span class="op">=</span> <span class="va">reported_cases</span>,</span>
<span class="r-in">  dist <span class="op">=</span> <span class="va">trunc_dist</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># fit model to example data</span></span>
<span class="r-in"><span class="va">est</span> <span class="op">&lt;-</span> <span class="fu">estimate_truncation</span><span class="op">(</span><span class="va">example_data</span>,</span>
<span class="r-in">  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span class="r-in">  chains <span class="op">=</span> <span class="fl">2</span>, iter <span class="op">=</span> <span class="fl">2000</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># summary of the distribution</span></span>
<span class="r-in"><span class="va">est</span><span class="op">$</span><span class="va">dist</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $mean_sd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.048</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $sd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.837</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $sd_sd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span class="co"># summary of the estimated truncation cmf (can be applied to new data)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">est</span><span class="op">$</span><span class="va">cmf</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     index      mean      se_mean           sd  lower_90  lower_50  lower_20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:    10 1.0000000 1.229709e-16 1.232606e-16 1.0000000 1.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:     9 0.9897167 9.540969e-05 2.517766e-03 0.9852316 0.9881352 0.9892874</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:     8 0.9752970 2.088653e-04 5.537674e-03 0.9656375 0.9717680 0.9742890</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:     7 0.9546060 3.413565e-04 9.104161e-03 0.9388958 0.9487342 0.9528299</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:     6 0.9241262 4.900833e-04 1.317354e-02 0.9018118 0.9154829 0.9213714</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:     5 0.8778668 6.439108e-04 1.746685e-02 0.8489062 0.8662818 0.8738324</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:     4 0.8052973 7.718258e-04 2.113911e-02 0.7714286 0.7913532 0.7998544</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:     3 0.6875869 7.929954e-04 2.214976e-02 0.6528999 0.6727746 0.6815341</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:     2 0.4928854 5.604574e-04 1.716848e-02 0.4666520 0.4811258 0.4877839</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:     1 0.1933555 2.842250e-04 1.197321e-02 0.1743768 0.1855526 0.1901809</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        median  upper_20  upper_50  upper_90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: 1.0000000 1.0000000 1.0000000 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 0.9898835 0.9904372 0.9914312 0.9935087</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: 0.9755912 0.9768446 0.9790264 0.9837393</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: 0.9549756 0.9570536 0.9607162 0.9685737</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: 0.9245207 0.9275099 0.9328207 0.9445165</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6: 0.8781651 0.8820490 0.8891580 0.9053469</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7: 0.8053906 0.8101147 0.8184032 0.8389713</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: 0.6872303 0.6926734 0.7013039 0.7232266</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 0.4919453 0.4964692 0.5032356 0.5217425</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: 0.1928419 0.1955930 0.2005729 0.2136926</span>
<span class="r-in"><span class="co"># observations linked to truncation adjusted estimates</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">est</span><span class="op">$</span><span class="va">obs</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           date confirm last_confirm report_date mean se_mean  sd lower_90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: 2020-03-24    4751         4789  2020-04-01 4800       0  12     4782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 2020-03-25    5163         5249  2020-04-01 5293       1  30     5248</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: 2020-03-26    5049         5210  2020-04-01 5289       1  50     5212</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: 2020-03-27    5804         6153  2020-04-01 6281       3  89     6144</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: 2020-03-28    5345         5959  2020-04-01 6091       4 121     5903</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6: 2020-03-29    4860         5974  2020-04-01 6039       5 158     5792</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7: 2020-03-30    3474         5217  2020-04-01 5057       5 161     4803</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: 2020-03-31    1721         4050  2020-04-01 3495       3 120     3298</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 2020-04-01     502         4053  2020-04-01 2606       3 160     2349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: 2020-03-29    5852         5974  2020-04-06 5912       0  15     5890</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: 2020-03-30    5025         5217  2020-04-06 5152       1  29     5108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12: 2020-03-31    3808         4050  2020-04-06 3989       1  38     3931</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13: 2020-04-01    3676         4053  2020-04-06 3978       2  56     3891</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14: 2020-04-02    4105         4782  2020-04-06 4677       3  93     4534</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15: 2020-04-03    3668         4668  2020-04-06 4557       4 119     4372</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16: 2020-04-04    3093         4585  2020-04-06 4502       5 144     4276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17: 2020-04-05    2423         4805  2020-04-06 4921       5 170     4644</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18: 2020-04-06    1106         4316  2020-04-06 5741       8 353     5175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19: 2020-04-03    4636         4668  2020-04-11 4684       0  11     4666</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20: 2020-04-04    4522         4585  2020-04-11 4636       0  26     4596</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21: 2020-04-05    4681         4805  2020-04-11 4904       1  46     4832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22: 2020-04-06    4115         4316  2020-04-11 4453       2  63     4356</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23: 2020-04-07    3298         3599  2020-04-11 3758       2  74     3642</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24: 2020-04-08    2580         3039  2020-04-11 3205       3  83     3075</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25: 2020-04-09    2788         3836  2020-04-11 4058       4 129     3854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26: 2020-04-10    2156         4204  2020-04-11 4379       4 151     4132</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27: 2020-04-11     789         3951  2020-04-11 4096       5 252     3692</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28: 2020-04-13    4050         4050  2020-04-21 4092       0  10     4076</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29: 2020-04-14    3089         3089  2020-04-21 3167       0  18     3140</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30: 2020-04-15    2861         2861  2020-04-21 2997       1  28     2953</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31: 2020-04-16    2491         2491  2020-04-21 2696       1  38     2637</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32: 2020-04-17    3350         3350  2020-04-21 3817       2  75     3700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33: 2020-04-18    2793         2793  2020-04-21 3470       3  90     3329</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34: 2020-04-19    2284         2284  2020-04-21 3325       3 106     3158</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35: 2020-04-20    1291         1291  2020-04-21 2622       2  90     2474</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36: 2020-04-21     302          302  2020-04-21 1567       2  96     1413</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           date confirm last_confirm report_date mean se_mean  sd lower_90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     lower_50 lower_20 median upper_20 upper_50 upper_90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:     4792     4796   4799     4802     4808     4822</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:     5273     5285   5292     5299     5312     5346</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:     5255     5275   5287     5298     5321     5377</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:     6221     6257   6277     6299     6339     6435</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:     6011     6059   6086     6116     6170     6296</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:     5938     5999   6034     6076     6141     6299</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:     4953     5015   5055     5097     5163     5320</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:     3419     3466   3498     3528     3577     3687</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:     2502     2566   2603     2639     2705     2878</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:     5902     5908   5911     5915     5922     5939</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:     5132     5144   5150     5157     5170     5203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:     3963     3978   3987     3996     4013     4055</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:     3940     3963   3976     3989     4015     4076</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:     4616     4653   4674     4697     4738     4835</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:     4481     4527   4554     4585     4635     4754</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:     4410     4465   4500     4538     4597     4737</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:     4814     4880   4925     4967     5036     5192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:     5514     5654   5735     5815     5960     6342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:     4676     4680   4683     4686     4691     4705</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:     4618     4629   4635     4641     4653     4682</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21:     4872     4891   4901     4912     4933     4985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22:     4411     4436   4450     4466     4494     4563</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23:     3709     3739   3755     3774     3807     3884</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24:     3152     3184   3203     3225     3260     3344</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25:     3975     4024   4056     4090     4144     4270</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26:     4284     4342   4382     4419     4481     4620</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27:     3933     4033   4091     4148     4252     4524</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28:     4085     4089   4091     4093     4098     4110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29:     3155     3162   3166     3170     3178     3198</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30:     2977     2989   2995     3002     3015     3047</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31:     2670     2685   2694     2703     2720     2762</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32:     3767     3797   3814     3833     3867     3946</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33:     3412     3447   3467     3491     3529     3620</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34:     3256     3297   3323     3351     3394     3498</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35:     2565     2600   2624     2646     2683     2766</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36:     1505     1544   1566     1587     1627     1731</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     lower_50 lower_20 median upper_20 upper_50 upper_90</span>
<span class="r-in"><span class="co"># validation plot of observations vs estimates</span></span>
<span class="r-in"><span class="fu"><a href="plot.estimate_infections.html">plot</a></span><span class="op">(</span><span class="va">est</span><span class="op">)</span></span>
<span class="r-plt img"><img src="estimate_truncation-1.png" alt="" width="864" height="864"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Joel Hellewell, Katharine Sherratt, Katelyn Gostic, Joe Hickson, Hamada S. Badr, Michael DeWitt, EpiForecasts, <a href="https://www.lshtm.ac.uk/aboutus/people/funk.sebastian" class="external-link">Sebastian Funk</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.9000.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '43da981922253a06c4dfab7b53f2410e',
    indexName: 'epinow2',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

